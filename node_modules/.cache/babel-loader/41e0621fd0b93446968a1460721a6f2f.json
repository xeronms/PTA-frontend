{"ast":null,"code":"import _classCallCheck from \"C:/Users/ESG-dell/Documents/Dev/Hachathon-miasta/PTA-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/ESG-dell/Documents/Dev/Hachathon-miasta/PTA-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\n\nvar I3STileManager = /*#__PURE__*/function () {\n  function I3STileManager() {\n    _classCallCheck(this, I3STileManager);\n\n    _defineProperty(this, \"_statusMap\", void 0);\n\n    this._statusMap = {};\n  }\n\n  _createClass(I3STileManager, [{\n    key: \"add\",\n    value: function add(request, key, callback, frameState) {\n      var _this = this;\n\n      if (!this._statusMap[key]) {\n        this._statusMap[key] = {\n          request: request,\n          callback: callback,\n          key: key,\n          frameState: frameState,\n          status: STATUS.REQUESTED\n        };\n        request().then(function (data) {\n          _this._statusMap[key].status = STATUS.COMPLETED;\n\n          _this._statusMap[key].callback(data, frameState);\n        }).catch(function (error) {\n          _this._statusMap[key].status = STATUS.ERROR;\n          callback(error);\n        });\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(key, frameState) {\n      if (this._statusMap[key]) {\n        this._statusMap[key].frameState = frameState;\n      }\n    }\n  }, {\n    key: \"find\",\n    value: function find(key) {\n      return this._statusMap[key];\n    }\n  }]);\n\n  return I3STileManager;\n}();\n\nexport { I3STileManager as default };","map":{"version":3,"sources":["../../../../src/tileset/traversers/i3s-tile-manager.ts"],"names":["STATUS","REQUESTED","COMPLETED","ERROR","constructor","add","request","callback","key","frameState","status","data","error","update","find"],"mappings":";;;AAAA,IAAMA,MAAM,GAAG;AACbC,EAAAA,SAAS,EADI,WAAA;AAEbC,EAAAA,SAAS,EAFI,WAAA;AAGbC,EAAAA,KAAK,EAAE;AAHM,CAAf;;IAOe,c;AAGbC,4BAAc;AAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA;;AACZ,SAAA,UAAA,GAAA,EAAA;AACD;;;;WAEDC,aAAG,OAAHA,EAAG,GAAHA,EAAG,QAAHA,EAAG,UAAHA,EAAwC;AAAA;;AACtC,UAAI,CAAC,KAAA,UAAA,CAAL,GAAK,CAAL,EAA2B;AACzB,aAAA,UAAA,CAAA,GAAA,IAAuB;AAACC,UAAAA,OAAD,EAACA,OAAD;AAAUC,UAAAA,QAAV,EAAUA,QAAV;AAAoBC,UAAAA,GAApB,EAAoBA,GAApB;AAAyBC,UAAAA,UAAzB,EAAyBA,UAAzB;AAAqCC,UAAAA,MAAM,EAAEV,MAAM,CAACC;AAApD,SAAvB;AACAK,QAAAA,OAAO,GAAPA,IAAAA,CACSK,UAAAA,IAAD,EAAU;AACd,UAAA,KAAA,CAAA,UAAA,CAAA,GAAA,EAAA,MAAA,GAA8BX,MAAM,CAApC,SAAA;;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,GAAA,EAAA,QAAA,CAAA,IAAA,EAAA,UAAA;AAHJM,SAAAA,EAAAA,KAAAA,CAKUM,UAAAA,KAAD,EAAW;AAChB,UAAA,KAAA,CAAA,UAAA,CAAA,GAAA,EAAA,MAAA,GAA8BZ,MAAM,CAApC,KAAA;AACAO,UAAAA,QAAQ,CAARA,KAAQ,CAARA;AAPJD,SAAAA;AASD;AACF;;;WAEDO,gBAAM,GAANA,EAAM,UAANA,EAAwB;AACtB,UAAI,KAAA,UAAA,CAAJ,GAAI,CAAJ,EAA0B;AACxB,aAAA,UAAA,CAAA,GAAA,EAAA,UAAA,GAAA,UAAA;AACD;AACF;;;WAEDC,cAAI,GAAJA,EAAU;AACR,aAAO,KAAA,UAAA,CAAP,GAAO,CAAP;AACD;;;;;;SA9BY,c","sourcesContent":["const STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\n\n// A helper class to manage tile metadata fetching\nexport default class I3STileManager {\n  private _statusMap: object;\n\n  constructor() {\n    this._statusMap = {};\n  }\n\n  add(request, key, callback, frameState) {\n    if (!this._statusMap[key]) {\n      this._statusMap[key] = {request, callback, key, frameState, status: STATUS.REQUESTED};\n      request()\n        .then((data) => {\n          this._statusMap[key].status = STATUS.COMPLETED;\n          this._statusMap[key].callback(data, frameState);\n        })\n        .catch((error) => {\n          this._statusMap[key].status = STATUS.ERROR;\n          callback(error);\n        });\n    }\n  }\n\n  update(key, frameState) {\n    if (this._statusMap[key]) {\n      this._statusMap[key].frameState = frameState;\n    }\n  }\n\n  find(key) {\n    return this._statusMap[key];\n  }\n}\n"]},"metadata":{},"sourceType":"module"}